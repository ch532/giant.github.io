<!DOCTYPE html>
<html>
  <head>
    <title>IMA VAST Test</title>
    <script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
    <style>
      #adContainer {
        width: 640px;
        height: 360px;
        background: black;
        position: relative;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="adContainer"></div>

    <script>
      const adContainer = document.getElementById("adContainer");
      const adDisplayContainer = new google.ima.AdDisplayContainer(adContainer);
      const adsLoader = new google.ima.AdsLoader(adDisplayContainer);

      adContainer.addEventListener("click", function () {
        adDisplayContainer.initialize();

        const adsRequest = new google.ima.AdsRequest();
        adsRequest.adTagUrl = "https://s.magsrv.com/v1/vast.php?idzone=5688604";

        adsRequest.linearAdSlotWidth = 640;
        adsRequest.linearAdSlotHeight = 360;

        const adsManagerLoadedCallback = function (adsManagerLoadedEvent) {
          const adsManager = adsManagerLoadedEvent.getAdsManager();
          adsManager.init(640, 360, google.ima.ViewMode.NORMAL);
          adsManager.start();
        };

        adsLoader.addEventListener(
          google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
          adsManagerLoadedCallback
        );

        adsLoader.addEventListener(
          google.ima.AdErrorEvent.Type.AD_ERROR,
          function (adErrorEvent) {
            console.log("Ad Error:", adErrorEvent.getError());
          }
        );

        adsLoader.requestAds(adsRequest);
      });
    </script>
  </body>
</html>
